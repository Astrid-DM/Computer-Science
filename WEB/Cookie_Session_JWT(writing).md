## 1. Cookie
### 1-1. 정의
- <key, value> 형태의 문자열로 브라우저에 저장되어 사용자를 인식하거나 일부 데이터를 저장
- 서버가 클라이언트에 정보를 전달할 때 저장하고자 하는 정보를 응답 헤더(Cookie)에 저장하여 전달

### 1-2. 등장 배경
- 서버에 무언가를 요청할 때 마다 사용자가 ID, PW를 통해 로그인을 해야하는 불편함이 존재했음
- Cookie는 사용자가 한 번 로그인을 하면 쿠키를 생성하여 저장하고, 이후 요청은 로그인 없이 진행 가능

### 1-3. 문제점
- Cookie가 노출되었을 때, ID, PW와 같은 중요 정보들이 쉽게 노출됨
- 웹 브라우저마다 Cookie에 대한 지원 형태가 다르기 때문에 브라우저간 공유가 불가능
- Cookie의 사이즈는 4KB로 제한되어있어 많은 양의 데이터를 담지 못함

## 2. Cookie + Session
### 2-1. 등장 배경
- Cookie의 문제점을 해결하기 위해 나온 개념
    - Cookie에 ID, PW와 같은 중요 정보를 담는게 아니라, 중요 정보가 아닌 인증을 위한 별개의 정보를 세션 저장소에 저장하고, 클라이언트는 이 정보를 쿠키에 대신 담아서 요청하고 서버는 세션 저장소에 있는 정보랑 일치하는지 확인하는 방식

### 2-2. 동작 과정
1. 클라이언트가 ID/PW로 서버에 로그인을 요청
2. ID/PW로 인증 후, 사용자를 식별할 유니크한 세션 ID를 만들어 마치 자물쇠처럼 서버의 세션 저장소에 저장
3. 세션 ID를 특정한 형태(Cookie or Json)로 클라이언트에 다시 반환
4. 이후 사용자 인증이 필요한 정보를 요청할 때마다 이 세션 ID를 쿠키에 담아 서버에 함께 전달
5. 인증이 필요한 API일때, 서버는 세션 ID가 세션 저장소에 있는지 확인
6. 있다면 인증 완료 후 API처리, 없다면 401 에러 반환

### 2-3. 문제점
- 세션 ID, Cookie 등이 탈취된다면 세션 저장소를 전부 지워 해결 가능하지만, 탈취당하지 않은 정상적인 유저도 모두 재인증을 해야하는 상황이 발생
- HTTP의 특성 중 하나인 `stateless`를 위반
    - `stateless` : 서버는 클라이언트의 상태를 저장하지 않음
- 세션 저장소에 클라이언트의 상태를 저장하는 특성상, `stateful`하게 가게됨
- `stateful`하게 갈 경우, 서버를 스케일 아웃할 때, 1번 서버에 로그인한 사용자가 2번 서버에 요청을 보낸다면 2번 서버에는 로그인 상태가 남아있지 않기 때문에 다시 로그인 해야하는 상황 발생

💡 `stateful` vs `stateless` : [링크 참고](https://github.com/Astrid-DM/Computer-Science/blob/main/WEB/Stateful_VS_Stateless.md)

### 2-4. 문제점 해결
##### 세션 클러스터링 
- 세션 클러스터링으로 서버간 로그인 정보가 담긴 세션을 공유하는 방법이 있지만, 실제 서비스와 관련없는 인프라적인 작업으로 서버 리소스를 많이 쓰게되는 단점 존재
- 전체적인 서버 규모가 크지 않다면 나쁘지 않은 방법이지만, MSA로 잘게 쪼개져 수십, 수백개의 서버로 이루어진다면 단점이 극명하게 드러남

##### 스티키 세션
- 스케일 아웃 시 여러 서버에 세션 정보를 복사할 필요가 없도록 특정 세션을 처음 처리한 서버에게 같은 세션의 요청을 처리하도록 하는 방식
    - A 유저가 최초로 A 서버에 요청을 했다면 이후 A의 모든 요청은 A서버가 처리하는 방식
- 로드 밸런싱이 균일하게 보장되지 않음 (특정 서버에 요청이 몰릴수도 있음)
- 클라이언트의 상태를 어디선가 들고있어야 한다는 문제점을 해결하지 못함

#
#
> 이러한 문제점을 해결하기 위해 나온 개념이 JWT

## 3. JWT
### 3-1. JWT 정의
- JSON Web Token(JWT)은 웹 표준(`RFC 7519`)으로서 두 개체에서 JSON 객체를 사용하고 가볍가 자가 수용적인(Self-contained) 방식으로 정보를 안정성 있게 전달
    - 자가 수용적 : JWT 안에 인증에 필요한 모든 정보를 자체적으로 지니고 있음

### 3-2. 인증과정
![JWT Process](https://velog.velcdn.com/images/znftm97/post/f3062577-90ac-4c7c-9f8e-d0e0babcdcde/image.png)

### 3-3. JWT 구조
![JWT Structure](https://velog.velcdn.com/images/znftm97/post/aff45d8d-8f18-436f-9dc5-2c31cf41e9d4/image.png)
![JWT Example](https://velog.velcdn.com/images/znftm97/post/f2f7bd79-8475-4cb9-81cc-242e1f975421/image.png)
- 각각 구분을 위해 `.`구분자가 들어감
#
#
#

> 출처 : [LTH님의 Velog - JWT란?](https://velog.io/@znftm97/JWT-Session-Cookie-비교-sphsi9yh) 
